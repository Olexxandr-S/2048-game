(this.webpackJsonp2048=this.webpackJsonp2048||[]).push([[0],{18:function(t,e,n){},20:function(t,e,n){},21:function(t,e,n){},22:function(t,e,n){},23:function(t,e,n){},25:function(t,e,n){},26:function(t,e,n){"use strict";n.r(e);var i=n(0),c=n.n(i),r=n(10),o=n.n(r),a=n(3),u=(n(18),n(1)),s=function(t){var e=t.children,n=t.onClick;return Object(u.jsx)("button",{className:"button",onClick:n,children:e})},d=n(28),l=n(2),b=n(7),f=c.a.createContext({containerWidth:0,tileCount:v}),j=function(t){var e=t.children,n=t.containerWidth,i=void 0===n?0:n,c=t.tileCount,r=void 0===c?v:c;return Object(u.jsx)(f.Provider,{value:{containerWidth:i,tileCount:r},children:e})},O=function(){var t=Object(i.useContext)(f);return[t.containerWidth,t.tileCount]},v=(n(20),4),h=n(8),p=(n(21),function(){var t=O(),e=Object(a.a)(t,2)[1];return Object(u.jsx)("div",{className:"grid",children:function(){for(var t=e*e,n=[],i=0;i<t;i+=1)n.push(Object(u.jsx)("div",{className:"grid-cell"},"".concat(i)));return n}()})}),E=n(11),x=(n(22),function(t){var e=t.value,n=t.position,c=t.zIndex,r=O(),o=Object(a.a)(r,2),s=o[0],d=o[1],l=Object(i.useState)(1),b=Object(a.a)(l,2),f=b[0],j=b[1],v=function(t){var e=Object(i.useRef)();return Object(i.useEffect)((function(){e.current=t})),e.current}(e),h=n[0]<d&&n[1]<d;Object(E.a)(h,"Tile out of bound");var p=void 0===v||v!==e;Object(i.useEffect)((function(){p&&(j(1.1),setTimeout((function(){return j(1)}),100))}),[p,f]);var x=function(t){return t/d*s},C={top:x(n[1]),left:x(n[0]),transform:"scale(".concat(f,")"),zIndex:c};return Object(u.jsx)("div",{className:"tile tile-".concat(e),style:C,children:e})}),C=(n(23),["id"]),m=function(t){var e=t.tiles,n=t.tileCountPerRow,i=void 0===n?v:n,c=116*i,r=c+16,o=e.map((function(t){var e=t.id,n=Object(h.a)(t,C);return Object(u.jsx)(x,Object(l.a)(Object(l.a)({},n),{},{zIndex:e}),"tile-".concat(e))}));return Object(u.jsx)("div",{className:"board",style:{width:r},children:Object(u.jsxs)(j,{containerWidth:c,tileCount:i,children:[Object(u.jsx)("div",{className:"tile-container",children:o}),Object(u.jsx)(p,{})]})})},w=1,y=n(13),T=n(4),g={tiles:{},byIds:[],hasChanged:!1,inMotion:!1},I=function(t,e){switch(e.type){case"CREATE_TILE":return Object(l.a)(Object(l.a)({},t),{},{tiles:Object(l.a)(Object(l.a)({},t.tiles),{},Object(T.a)({},e.tile.id,e.tile)),byIds:[].concat(Object(b.a)(t.byIds),[e.tile.id]),hasChanged:!1});case"UPDATE_TILE":return Object(l.a)(Object(l.a)({},t),{},{tiles:Object(l.a)(Object(l.a)({},t.tiles),{},Object(T.a)({},e.tile.id,e.tile)),hasChanged:!0});case"MERGE_TILE":var n=t.tiles,i=e.source.id,c=e.destination.id,r=(n[i],n[c],Object(h.a)(n,[i,c].map(y.a)));return Object(l.a)(Object(l.a)({},t),{},{tiles:Object(l.a)(Object(l.a)({},r),{},Object(T.a)({},e.destination.id,{id:e.destination.id,value:e.source.value+e.destination.value,position:e.destination.position})),byIds:t.byIds.filter((function(t){return t!==e.source.id})),hasChanged:!0});case"START_MOVE":return Object(l.a)(Object(l.a)({},t),{},{inMotion:!0});case"END_MOVE":return Object(l.a)(Object(l.a)({},t),{},{inMotion:!1});default:return t}},k=void 0,M=function(){var t=Object(i.useRef)(!0),e=[function(){return w++}],n=Object(a.a)(e,1)[0],c=Object(i.useReducer)(I,g),r=Object(a.a)(c,2),o=r[0],u=r[1],s=o.tiles,d=o.byIds,f=o.hasChanged,j=o.inMotion,O=Object(i.useCallback)((function(t){var e=t.position,i=t.value,c={id:n(),position:e,value:i};u({type:"CREATE_TILE",tile:c})}),[n]),h=function(t,e){setTimeout((function(){return function(t,e){u({type:"MERGE_TILE",source:t,destination:e})}(t,e)}),250)},p=function(t){u({type:"UPDATE_TILE",tile:t})},E=Object(i.useCallback)((function(){var t=new Array(v*v).fill(0);return d.forEach((function(e){var n=s[e].position,i=m(n);t[i]=e})),t}),[d,s]),x=Object(i.useCallback)((function(){return E().reduce((function(t,e,n){return 0===e?[].concat(Object(b.a)(t),[y(n)]):t}),[])}),[E]),C=Object(i.useCallback)((function(){var t=x();if(t.length>0){var e=t[Math.floor(Math.random()*t.length)];O({position:e,value:2})}}),[x,O]),m=function(t){return t[1]*v+t[0]},y=function(t){return[t%v,Math.floor(t/v)]},T=function(t,e){u({type:"START_MOVE"});for(var n=v-1,i=function(i){var c=t(i),r=void 0,o=0;c.forEach((function(t,c){var a=s[t];if(void 0!==r&&r.value===a.value){var u=Object(l.a)(Object(l.a)({},a),{},{position:r.position,mergeWith:r.id});return h(u,r),r=void 0,o+=1,p(u)}var d=Object(l.a)(Object(l.a)({},a),{},{position:y(e(i,c,o,n))});if(r=d,function(t,e){var n=t.position[0]!==e.position[0],i=t.position[1]!==e.position[1];return n||i}(a,d))return p(d)}))},c=0;c<v;c+=1)i(c);setTimeout((function(){return u({type:"END_MOVE"})}),250)};return Object(i.useEffect)((function(){if(t.current)return O({position:[0,1],value:2}),O({position:[0,2],value:2}),void(t.current=!1);!j&&f&&C()}),[f,j,O,C]),[d.map((function(t){return s[t]})),T.bind(k,(function(t){var e=E();return[e[t*v+0],e[t*v+1],e[t*v+2],e[t*v+3]].filter((function(t){return 0!==t}))}),(function(t,e,n,i){return t*v+e-n})),T.bind(k,(function(t){var e=E();return[e[t*v+0],e[t*v+1],e[t*v+2],e[t*v+3]].filter((function(t){return 0!==t})).reverse()}),(function(t,e,n,i){return t*v+i+n-e})),T.bind(k,(function(t){var e=E();return[e[t+0*v],e[t+1*v],e[t+2*v],e[t+3*v]].filter((function(t){return 0!==t}))}),(function(t,e,n,i){return t+v*(e-n)})),T.bind(k,(function(t){var e=E();return[e[t+0*v],e[t+1*v],e[t+2*v],e[t+3*v]].filter((function(t){return 0!==t})).reverse()}),(function(t,e,n,i){return t+v*(i-e+n)}))]},R=function(){var t=M(),e=Object(a.a)(t,5),n=e[0],c=e[1],r=e[2],o=e[3],s=e[4],l=Object(d.a)((function(t){switch(t.preventDefault(),t.code){case"ArrowLeft":c();break;case"ArrowRight":r();break;case"ArrowUp":o();break;case"ArrowDown":s()}}),250,{leading:!0,trailing:!1});return Object(i.useEffect)((function(){return window.addEventListener("keydown",l),function(){window.removeEventListener("keydown",l)}}),[l]),Object(u.jsx)(m,{tiles:n,tileCountPerRow:v})},A=n(12),N=n.n(A),_=(n(25),function(){var t=Object(i.useState)(new Date),e=Object(a.a)(t,2),n=e[0],c=e[1];return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)(N.a,{href:"https://github.com/OlexxandrS/2048-game"}),Object(u.jsx)("div",{children:Object(u.jsx)("h1",{children:"Play 2048"})}),Object(u.jsx)("div",{children:Object(u.jsx)(s,{onClick:function(){c(new Date)},children:"Restart"})})]}),Object(u.jsx)(R,{},n.toISOString())]})});o.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(_,{})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.10b16f4f.chunk.js.map